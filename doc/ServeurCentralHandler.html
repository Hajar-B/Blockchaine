<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="fr">
<head>
<!-- Generated by javadoc (11.0.11) on Mon May 17 22:38:03 CEST 2021 -->
<title>ServeurCentralHandler</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2021-05-17">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="script.js"></script>
<script type="text/javascript" src="jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ServeurCentralHandler";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "./";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<h2 title="Class ServeurCentralHandler" class="title">Class ServeurCentralHandler</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>ServeurCentralHandler</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.lang.Runnable</code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">ServeurCentralHandler</span>
extends java.lang.Object
implements java.lang.Runnable</pre>
<div class="block">ServeurCentralHandler est une classe qui implemente le run d'un Thread. Cette classe permet :
 <ol>
 <li> Il initialise un blockchaine
 <li> Il attend de recevoir les transactions envoyes par les mineurs
 <li> Il verifie que les blocs crees a partir de ces transaction soient coherents et inserables
 <li> Il incremente une difficulte si moins de 10 minutes se sont ecoulees lors du traitement d'une transaction, sinon il la decremente
 <li> Si le bloc est coherent et inserable, il l'ajoute a la Blockchaine et il renvoie la transaction avec le sel et la nouvelle difficulte
 <ol></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.net.Socket,java.util.ArrayList)">ServeurCentralHandler</a></span>&#8203;(java.net.Socket&nbsp;mineur,
                     java.util.ArrayList&lt;<a href="ServeurCentralHandler.html" title="class in &lt;Unnamed&gt;">ServeurCentralHandler</a>&gt;&nbsp;listeMineur)</code></th>
<td class="colLast">
<div class="block">Constructeur qui cree un ServeurCentralHandler.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="Blockchaine.html" title="class in &lt;Unnamed&gt;">Blockchaine</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBck()">getBck</a></span>()</code></th>
<td class="colLast">
<div class="block">Fonction qui renvoie la blockchaine</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getDifficulte()">getDifficulte</a></span>()</code></th>
<td class="colLast">
<div class="block">Fonction qui renvoie la difficulte courante</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTabCrypto()">getTabCrypto</a></span>()</code></th>
<td class="colLast">
<div class="block">Fonction qui renvoie le premier tableau de cryptomonnaie</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#maj(int%5B%5D,int)">maj</a></span>&#8203;(int[]&nbsp;tr_sel,
   int&nbsp;difficulte)</code></th>
<td class="colLast">
<div class="block">Fonction qui verifie si avec la transaction que le mineur a envoye au serveur, que le bloc est coherent et inserable.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="Blockchaine.html" title="class in &lt;Unnamed&gt;">Blockchaine</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#misajourbckmineur(ServeurCentralHandler)">misajourbckmineur</a></span>&#8203;(<a href="ServeurCentralHandler.html" title="class in &lt;Unnamed&gt;">ServeurCentralHandler</a>&nbsp;m)</code></th>
<td class="colLast">
<div class="block">Fonction qui met a jour la blockchaine de chaque nouveaux mineurs qui se connectent au serveur Central.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#run()">run</a></span>()</code></th>
<td class="colLast">
<div class="block">Fonction qui communique avec le mineur et agit en consequence.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setBck(Blockchaine)">setBck</a></span>&#8203;(<a href="Blockchaine.html" title="class in &lt;Unnamed&gt;">Blockchaine</a>&nbsp;bck)</code></th>
<td class="colLast">
<div class="block">Fonction qui modifie la blockchaine</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setDifficulte(int)">setDifficulte</a></span>&#8203;(int&nbsp;difficulte)</code></th>
<td class="colLast">
<div class="block">Fonction qui modifie la difficulte courante</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(java.net.Socket,java.util.ArrayList)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ServeurCentralHandler</h4>
<pre>public&nbsp;ServeurCentralHandler&#8203;(java.net.Socket&nbsp;mineur,
                             java.util.ArrayList&lt;<a href="ServeurCentralHandler.html" title="class in &lt;Unnamed&gt;">ServeurCentralHandler</a>&gt;&nbsp;listeMineur)
                      throws java.io.IOException</pre>
<div class="block">Constructeur qui cree un ServeurCentralHandler. 

 <ol>
 <li> Si la liste de mineur est vide, alors on insere un sel bloc a la blockchaine (avec un transaction NULL).
 <li> Sinon, on insere a chaque nouveaux mineurs, tous les blocs qui ont ete insere a la blockchaine du serveur central avant qu'ils soient connectes.
 <li> on initialise le temps ainsi que la difficulte
 <ol></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mineur</code> - Un socket</dd>
<dd><code>listeMineur</code> - La liste des mineurs qui sont connectees au serveur central</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getDifficulte()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDifficulte</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getDifficulte()</pre>
<div class="block">Fonction qui renvoie la difficulte courante</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>La difficulte</dd>
</dl>
</li>
</ul>
<a id="setDifficulte(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDifficulte</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setDifficulte&#8203;(int&nbsp;difficulte)</pre>
<div class="block">Fonction qui modifie la difficulte courante</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>difficulte</code> - La nouvelle difficulte</dd>
</dl>
</li>
</ul>
<a id="getTabCrypto()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTabCrypto</h4>
<pre class="methodSignature">public&nbsp;int[]&nbsp;getTabCrypto()</pre>
<div class="block">Fonction qui renvoie le premier tableau de cryptomonnaie</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Le tableau de cryptomonnaie</dd>
</dl>
</li>
</ul>
<a id="getBck()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBck</h4>
<pre class="methodSignature">public&nbsp;<a href="Blockchaine.html" title="class in &lt;Unnamed&gt;">Blockchaine</a>&nbsp;getBck()</pre>
<div class="block">Fonction qui renvoie la blockchaine</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>La blockchaine</dd>
</dl>
</li>
</ul>
<a id="setBck(Blockchaine)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBck</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setBck&#8203;(<a href="Blockchaine.html" title="class in &lt;Unnamed&gt;">Blockchaine</a>&nbsp;bck)</pre>
<div class="block">Fonction qui modifie la blockchaine</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bck</code> - La nouvelle blockchaine</dd>
</dl>
</li>
</ul>
<a id="misajourbckmineur(ServeurCentralHandler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>misajourbckmineur</h4>
<pre class="methodSignature">public&nbsp;<a href="Blockchaine.html" title="class in &lt;Unnamed&gt;">Blockchaine</a>&nbsp;misajourbckmineur&#8203;(<a href="ServeurCentralHandler.html" title="class in &lt;Unnamed&gt;">ServeurCentralHandler</a>&nbsp;m)</pre>
<div class="block">Fonction qui met a jour la blockchaine de chaque nouveaux mineurs qui se connectent au serveur Central. 
 De plus, elle envoie cette meme blockchaine au mineur pour qu'il puisse avoir chacun une blockchaine qui soit initialisee comme celle de serveur central.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>m</code> - Le premier mineur qui se soit connecte au serveur central</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>La nouvelle blockchaine du nouveau mineur</dd>
</dl>
</li>
</ul>
<a id="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;run()</pre>
<div class="block">Fonction qui communique avec le mineur et agit en consequence.
 <ol>
 <li> On recupere les 4 entiers envoyes par un mineur (somme, payeur, receveur et sel)
 <li> On teste si la transaction est coherente et inserable apres l'avoir insere dans bloc de la fonction maj()
 <li> Si c'est coherent et inserable, alors on cree une jointure et on l'insere a la blockchaine
 <li> On ajoute cette jointure a tous les mineurs connectes au serveur central
 <li> On affiche l'etat de la blockchaine
 <li> On envoie (avec une connexion multicast) 5 entiers a tous les mineurs (somme, payeur, receveur, sel et difficulte)
 <ol></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a id="maj(int[],int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>maj</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;maj&#8203;(int[]&nbsp;tr_sel,
               int&nbsp;difficulte)</pre>
<div class="block">Fonction qui verifie si avec la transaction que le mineur a envoye au serveur, que le bloc est coherent et inserable. Si le dernier bloc a ete insere il y a moins de 10 minutes alors on incremente la difficulte sinon on la decremente.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tr_sel</code> - Le tableau qui contient la transaction</dd>
<dd><code>difficulte</code> - La difficulte avant la verification du bloc</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>1 si le bloc est coherent et inserable sinon 0</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
